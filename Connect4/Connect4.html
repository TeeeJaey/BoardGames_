<html>
	<head>
		<title>	Connect 4 </title>
		<script data-require="jquery" data-semver="2.1.4" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	</head>
	
	<style>
		body
		{	background-color : #0ad;
			margin:20px;
			text-align:center;
		}
		h3{
			color : yellow
		}
		table
		{
			margin: auto;
		}
		td button
		{
			width:70px;
			height:70px;
			border-radius: 100%;
			border: 1px solid black;
		}
		
		button:active
		{
			background-color: grey;
		}
		
		#restart 
		{ 
			margin : 20px;
			width:	150px;
			height: 70px;
			font-size: 18px;
			border-radius: 10%;
			border: 1px solid black;
		}
	</style>
	
	<body>
		<h1>Connect 4 to win!</h1>
		<h3>Player 1 play ...</h3>
		<table id="myTable">
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
			<tr>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>
				<td><button type="button"></button></td>				
			</tr>
		</table>
		
		<button id="restart" onclick="document.location.reload(true)"> Restart game</button>
	</body>
	
	<script>
		var player = 1;
		var playerColour = "yellow";
		var playerWon = false;
		
		$('td').click(function(){
		
					
			
			if(playerWon)
				return;
			// Get Row ad Col
			var col = $(this).parent().children().index($(this));
			var row = $(this).parent().parent().children().index($(this).parent());

			
			// Play 
			
			var n=5
			var played = false;
			var pCol = col;
			
			
			while(n>=0)
			{	
				var currBtn = $(this).parent().parent().children().get(n).cells[pCol].firstChild;
				
				if(currBtn.style.backgroundColor!="yellow" && currBtn.style.backgroundColor!="red")
				{
					currBtn.style.backgroundColor = playerColour;
					played = true;
					var pRow = n;
					break;
				}
				n--;
			}
			
			
			// Check if anyone won
			if(played)
			{
				// Colckwise 
				
				var i = pRow;
				var j = pCol;
				var count = 0;
				
				// Direction 	UR <---> DL
				while(i>=0 && j<=5)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					i --;
					j ++;					
				}
				
				i = pRow+1;
				j = pCol-1;
				while(i<=5 && j>=0)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					i ++;		
					j --;					
				}
				
				

				i = pRow;
				j = pCol;
				count = 0;
				// Direction 	DR <---> UL
				while(i<=5 && j<=5)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					i ++;
					j ++;				
				}
				
				i = pRow-1;
				j = pCol-1;
				while(i>=0 && j>=0)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}

					i --;
					j --;					
				}
				
				
				i = pRow;
				j = pCol;
				count = 0;
				
				// Direction 	L <---> R
				while(j>=0)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					j --;					
				}
	

				i = pRow;
				j = pCol+1;
				while(j<=5)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					j ++;				
				}
				

				i = pRow;
				j = pCol;
				count = 0;
				// Direction D
				while(i<=5)
				{	
					var currBtn = $(this).parent().parent().children().get(i).cells[j].firstChild;
					if(currBtn.style.backgroundColor == playerColour)
					{
						count++;
						if(count == 4)
						{
							playerWon = true;
							$('h3')[0].style.color = playerColour
							$('h3')[0].innerText = "Player " + player + " won!";
							return;
						}
						
					}
					else{
						break;
					}
					
					i ++;			
				}

			
				// Change player
				
				if(player == 1)
				{
					player = 2
					playerColour = "red";
					$('h3')[0].style.color = playerColour
					$('h3')[0].innerText = "Player " + player + " play ...";
				}
				else
				{
					player = 1
					playerColour = "yellow";
					$('h3')[0].style.color = playerColour
					$('h3')[0].innerText = "Player " + player + " play ...";
				}
			}
						

			
		});
			
	</script>
	
	
</html>